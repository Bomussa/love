### ⚠️ التعليمات الدائمة لذكاء Copilot

1. **افهم الهدف أولاً قبل التنفيذ**
   - لا تكتب أي كود قبل تحليل المطلوب بالكامل.
   - اربط دائمًا بين الملفات ذات العلاقة (frontend, backend, middle layer, api, db).
   - لا تنشئ أكواد مستقلة أو معزولة عن البنية الحالية.

2. **التكامل والربط الإجباري**
   - أي دالة أو ملف جديد يجب أن يُربط فعليًا في نقاط الاستدعاء أو الاستخدام.
   - تحقق من استيراد واستدعاء كل وظيفة تم إنشاؤها في الطبقة الصحيحة.
   - لا تترك دوال غير مستخدمة أو غير موصولة بالواجهة أو الخادم.

3. **منع التكرار والخلط**
   - لا تكرر الدوال أو الأكواد أو الثوابت تحت أسماء مختلفة.
   - لا تعيد تعريف متغير أو ثابت تم تعريفه سابقًا.
   - لا تكتب أي كود يؤدي إلى override غير مقصود.

4. **الالتزام بالثوابت والإعدادات**
   - استخدم القيم الثابتة والبيانات الأساسية المعرّفة في المشروع.
   - لا تنشئ ثوابت جديدة بدون مبرر واضح أو ربطها في config.
   - راجع دائمًا ملفات مثل `.env`, `constants.js`, `config.js`, `schema.prisma`, وملفات الإعداد الأخرى قبل أي تعديل.

5. **الدقة في الربط الداخلي**
   - اربط كل عملية مع event, listener, controller أو router مناسب.
   - عند تعديل API، حدّث معه:
     - المسار في الواجهة (fetch/axios).
     - الجداول أو الأعمدة المتأثرة في قاعدة البيانات.
     - عمليات التخزين أو القراءة المرتبطة.

6. **التحقق قبل الحفظ**
   - افحص أن الكود صالح syntactically وfunctionally.
   - تأكد من عدم وجود متغيرات غير معرفة أو وعود غير مغلقة.
   - اختبر الارتباطات مع الملفات المجاورة (imports, exports, routes).

7. **عدم حذف أي عنصر أساسي**
   - لا تحذف أو تغيّر أي كود رئيسي إلا إذا تم استبداله بشكل صحيح ومتكامل.
   - في التعديلات الحرجة، أضف النسخة السابقة بتعليق قبل التعديل.

8. **ضبط المنطق البرمجي**
   - كل شرط (if/else, try/catch) يجب أن يكون مغلقًا ومفسرًا.
   - لا تكتب أي switch أو loop بدون حالة افتراضية (default/fallback).
   - أضف دائمًا خطة طوارئ (rollback أو catch) عند العمليات الحساسة.

9. **الجودة والاختبارات**
   - استخدم ESLint + Husky لفحص الكود قبل الحفظ أو الدمج.
   - نفّذ دائمًا `npm run lint` و`npm test` بعد كل تعديل.
   - لا تعتمد على التصحيح اليدوي — نظّف الأخطاء آليًا.

10. **الشمولية وعدم النسيان**
    - لا تتجاهل أي ملحقات أو ملاحظات تم ذكرها في الطلب.
    - راجع دائمًا:
      - الملفات المساندة (manifest, service-worker, offline, assets).
      - الارتباطات الصوتية أو النصية أو الثيمات.
    - أي تعديل يجب أن يراجع أيضًا الملفات التابعة وظيفيًا (مثل Omar, core, utils).

11. **التزام الكود بالواقعية**
    - لا تكتب أكواد تجريبية أو “dummy”.
    - كل كود يُكتب يجب أن يعمل فعليًا بدون أخطاء وقت التشغيل.
    - امنع استخدام أي placeholder مثل `TODO`, `sample`, أو `mock`.

12. **التزام الشرح الذكي**
    - كل كود يتم إنشاؤه يجب أن يحتوي على شرح مختصر يوضح الغرض منه.
    - استخدم تعليقات مهنية واضحة (// Function: description …).

13. **التحقق من التكامل بعد كل تحديث**
    - بعد إضافة أو تعديل أي ميزة:
      - اختبر التكامل مع النظام الأساسي.
      - تأكد من أن جميع الواجهات والروابط تعمل كما كانت.
      - لا تترك ميزات غير مفعلة أو في حالة pending.

14. **خطة الطوارئ**
    - لكل عملية تعديل رئيسية، أضف خطة rollback سريعة (نسخ احتياطي قبل التعديل).
    - لا تقم بكتابة كود قد يعطّل بيئة الإنتاج بدون بديل أو نسخة آمنة.

15. **أولوية الدقة على السرعة**
    - الدقة أهم من السرعة.
    - لا تكمّل الكود بناءً على تخمين.
    - إذا لم يتضح السياق، استعرض الملفات المرتبطة أولًا قبل الكتابة.

### ✅ الهدف النهائي:
كود متكامل 100%، واقعي، خالٍ من التكرار والتعارض، قابل للصيانة والتوسع، جاهز للتشغيل المباشر دون تدخل يدوي.ضض
