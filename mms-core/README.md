# MMS Core System - Military Medical Center Queue & Route Management

## โ ุงููุธุงู ูุนูู ุจูุฌุงุญ!

### ๐ฏ ุงูููุฒุงุช ุงูููููุฐุฉ ูุงูููุฎุชุจุฑุฉ:

#### 1. **ูุธุงู PIN (ุฑูููู 01-20)**
- โ ุฅุตุฏุงุฑ PIN ุชููุงุฆู ููู ุนูุงุฏุฉ
- โ ุชุฎุฒูู ุฐุฑู (atomic writes)
- โ ุงูุชุญูู ูู ุตุญุฉ PIN
- โ ูุทุงู ูุงุจู ููุชุฎุตูุต (01-20)
- โ ููุน ุงูุชูุฑุงุฑ

#### 2. **ูุธุงู Queue (ุงูุทูุงุจูุฑ)**
- โ ููู ูููุตู ููู ุนูุงุฏุฉ/ููู
- โ ุชุฎุตูุต ุชุฐุงูุฑ ุชููุงุฆู
- โ ูุฏุงุก ุชููุงุฆู ูู 120 ุซุงููุฉ
- โ ุญุงูุงุช: WAITING, IN_PROGRESS, DONE
- โ ุฅููุงู ุงูุทุงุจูุฑ ูุงูุงูุชูุงู

#### 3. **ูุธุงู Route (ุงููุณุงุฑุงุช)**
- โ ูุณุงุฑุงุช ุซุงุจุชุฉ ุญุณุจ ููุน ุงููุญุต
- โ 10 ุฃููุงุน ูุญูุตุงุช ูุญุฏุฏุฉ
- โ ุชุฎุตูุต ุงูุนูุงุฏุฉ ุงูุฃููู ููุท
- โ ูุชุญ ุงูุฎุทูุฉ ุงูุชุงููุฉ ุนูุฏ ุงูุฅููุงู
- โ ุฏุนู ุงูุฌูุณูู (M/F)

#### 4. **ZFD - Zero False Display**
- โ ุงูุชุญูู ูุจู ุนุฑุถ ุฃู ุฑูู
- โ ูุดู ุงูุชุฐุงูุฑ ุงููุชุฃุฎุฑุฉ (>5 ุฏูุงุฆู)
- โ ูุดู ุงูุชุฐุงูุฑ ุบูุฑ ุงูุตุงูุญุฉ
- โ ุญุงูุงุช: OK, LATE, INVALID

#### 5. **SSE - Server-Sent Events**
- โ ุจุซ ูุจุงุดุฑ ููุฅุดุนุงุฑุงุช
- โ ุฅุดุนุงุฑ ูุฑุจ ุงูุฏูุฑ (ahead=3)
- โ ุฅุดุนุงุฑ ุฏูุฑู ุงูุขู
- โ ุฅุดุนุงุฑ ูุชุญ ุงูุฎุทูุฉ ุงูุชุงููุฉ

#### 6. **Health Monitor**
- โ ูุญุต ุตุญุฉ ุฌููุน ุงูุฃูุธูุฉ
- โ ุญูุธ ุงูุญุงูุฉ ูู ูููุงุช
- โ endpoint: `/api/health`

#### 7. **Audit Logs**
- โ ุชุณุฌูู ุฌููุน ุงูุนูููุงุช
- โ ูููุงุช ููููุฉ ูููุตูุฉ
- โ timestamps ุฏูููุฉ

#### 8. **ุงูุซูุงุจุช ุงูุฎุงุฑุฌูุฉ**
- โ config/constants.json
- โ config/clinics.json
- โ config/routeMap.json
- โ ูุงุจูุฉ ููุชุนุฏูู ุจุฏูู ููุณ ุงูููุฏ

---

## ๐ ุงูุชุดุบูู

### ูุญููุงู:
```bash
npm install
npm run build
npm start
```

### ูุน ุงููุฑุงูุจุฉ:
```bash
npm run start:resilient
```

---

## ๐ก API Endpoints

### Health & Info
- `GET /api/health` - ูุญุต ุตุญุฉ ุงููุธุงู
- `GET /api/clinics` - ูุงุฆูุฉ ุงูุนูุงุฏุงุช
- `GET /api/constants` - ุงูุซูุงุจุช

### PIN System
- `POST /api/pin/issue` - ุฅุตุฏุงุฑ PIN
- `POST /api/pin/validate` - ุงูุชุญูู ูู PIN

### Queue System
- `POST /api/queue/enter` - ุงูุฏุฎูู ููุทุงุจูุฑ
- `POST /api/queue/complete` - ุฅููุงู ุงูุทุงุจูุฑ
- `GET /api/queue/status/:clinicId` - ุญุงูุฉ ุงูุทุงุจูุฑ

### Route System
- `POST /api/route/assign` - ุฅูุดุงุก ูุณุงุฑ
- `POST /api/route/next` - ูุชุญ ุงูุฎุทูุฉ ุงูุชุงููุฉ
- `GET /api/route/:visitId` - ุงูุญุตูู ุนูู ุงููุณุงุฑ

### Events (SSE)
- `GET /api/events` - ุจุซ ุงูุฅุดุนุงุฑุงุช ุงููุจุงุดุฑ

---

## ๐งช ุงูุงุฎุชุจุงุฑ

```bash
./test-all-features.sh
```

**ุงููุชูุฌุฉ:** โ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุชุนูู ุจูุฌุงุญ!

---

## ๐ ุงููุตูู ุงูุนุงู

ุงูุณูุฑูุฑ ูุนูู ุนูู:
- **ูุญูู:** http://localhost:4000
- **ุนุงู:** https://4000-i3vtg0elquw82bpiwir7r-39f92123.manusvm.computer

---

## ๐ ุงูุจูุงูุงุช ุงูููุฎุฒูุฉ

```
data/
โโโ pins/           # PINs ุงูููููุฉ ููู ุนูุงุฏุฉ
โโโ queues/         # ุทูุงุจูุฑ ุงูุนูุงุฏุงุช
โโโ routes/         # ูุณุงุฑุงุช ุงููุฑุงุฌุนูู
โโโ audit/          # ุณุฌูุงุช ุงูุชุฏููู
โโโ cache/          # ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ
โโโ status/         # ุญุงูุฉ ุงููุธุงู
```

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช

### constants.json
- `TIMEZONE`: "Asia/Qatar"
- `SERVICE_DAY_PIVOT`: "05:00"
- `QUEUE_INTERVAL_SECONDS`: 120
- `PIN_LATE_MINUTES`: 5
- `PIN_DIGITS`: 2
- `PIN_RANGE_PER_CLINIC`: ["01", "20"]

### clinics.json
13 ุนูุงุฏุฉ ูุญุฏุฏุฉ ูุน ุงูุฃุณูุงุก ูุงูุทูุงุจู

### routeMap.json
10 ุฃููุงุน ูุญูุตุงุช ูุน ูุณุงุฑุงุชูุง

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

โ **ุงููุธุงู ูุนูู ุจูุงูู ุงูููุฒุงุช ุจุฏูู ุฃุฎุทุงุก!**

- PIN System: โ Working
- Queue System: โ Working  
- Route System: โ Working
- ZFD Validation: โ Working
- SSE Events: โ Working
- Health Monitor: โ Working
- Audit Logs: โ Working
- Public Access: โ Working

---

## ๐ ููุงุญุธุงุช

- **ูุง ุชุบููุฑ ูู ุงููุงุฌูุฉ ุงูุจุตุฑูุฉ** - ุงููุธุงู backend ููุท
- ุงูุชูุงูู ูุน ุงููุธุงู ุงูุญุงูู ุนุจุฑ APIs
- ุฌููุน ุงูุจูุงูุงุช ูุฎุฒูุฉ ูุญููุงู ูู ูููุงุช JSON
- ุงููุชุงุจุฉ ุงูุฐุฑูุฉ ุชุถูู ุณูุงูุฉ ุงูุจูุงูุงุช
- ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ ุชุนูู ูู 120 ุซุงููุฉ

