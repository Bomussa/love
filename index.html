<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MMC-MMS — واجهة التشغيل</title>
    <style>
      html,body{height:100%;margin:0}
      body{
        font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans Arabic', sans-serif;
        background: linear-gradient(135deg,#8a2f5d,#b65050,#c3742b,#b78b2e);
        display:flex;align-items:center;justify-content:center;color:#fff;
      }
      .card{background:rgba(0,0,0,.25);padding:28px 24px;border-radius:14px;backdrop-filter:blur(6px);min-width:320px}
      h1{margin:0 0 10px;font-size:22px}
      .muted{opacity:.85;font-size:14px;margin:0 0 14px}
      .ok{color:#b7ffb7}
      .fail{color:#ffdddd}
      code{background:rgba(255,255,255,.12);padding:2px 6px;border-radius:6px}
      .row{margin-top:12px}
      a{color:#fff;text-decoration:underline}
    </style>
  </head>
  <body>
    <div class="card">
      <h1>MMC-MMS</h1>
      <p class="muted">واجهة تشغيل مبدئية — الربط عبر <code>/api/v1</code> إلى Supabase Edge Functions.</p>
      <div id="status">يفحص الاتصال…</div>
      <div class="row"><small>المسار: <code>/api/v1/healthz</code></small></div>
    </div>

    <script>
      (async () => {
        const el = document.getElementById('status');
        try {
          const res = await fetch('/api/v1/healthz', { headers: { 'cache-control': 'no-cache' } });
          if (res.ok) {
            el.innerHTML = '<b class="ok">Connected ✅</b>';
          } else {
            el.innerHTML = '<b class="fail">API reachable لكن الاستجابة ' + res.status + '</b>';
          }
        } catch (e) {
          el.innerHTML = '<b class="fail">فشل الوصول إلى /api/v1</b>';
        }
      })();
    </script>
  </body>
</html>
