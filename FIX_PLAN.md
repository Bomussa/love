# ุชูุฑูุฑ ุดุงูู ูุฎุทุฉ ุฅุตูุงุญ ููุดุฑูุน Love

**ุชุงุฑูุฎ ุงูุชูุฑูุฑ:** 6 ููููุจุฑ 2025

**ุงูุญุงูุฉ:** ุชู ุชุญุฏูุฏ ุงููุดุงููุ ูุฎุทุฉ ุงูุฅุตูุงุญ ุฌุงูุฒุฉ ููุชูููุฐ.

---

## ๐ฏ ููุฎุต ุงููุดุงูู ุงูููุชุดูุฉ

ุจูุงุกู ุนูู ุงูุชุญููู ุงูุดุงูู ูููุณุชูุฏุน ุนูู GitHubุ ูุงูุงุชุตุงู ุจูุงุนุฏุฉ ุจูุงูุงุช Supabaseุ ููุญุต ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุงูููุดูุฑุฉ ุนูู Vercelุ ุชู ุชุญุฏูุฏ ุงููุดุงูู ุงูุชุงููุฉ ุงูุชู ุชููุน ุงูุงุชุตุงู ุงูุตุญูุญ ุจูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูุงูุฎูููุฉ.

### ุงููุดููุฉ ุฑูู 1: ุนุฏู ุชุทุงุจู ุฃุณูุงุก ุงูุฃุนูุฏุฉ (ุงูุฃูุซุฑ ุฎุทูุฑุฉ)

- **ุงููุตู:** ููุทุฉ ุงูููุงูุฉ (API Endpoint) ุงูุฎุงุตุฉ ุจุชุณุฌูู ุฏุฎูู ุงููุฑุถู (`/api/v1/patients/login`) ุชุญุงูู ุงุณุชุฎุฏุงู ุนููุฏ ุจุงุณู `patient_id` ููุชูุงุตู ูุน ุฌุฏูู `patients` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.
- **ุงูุญูููุฉ:** ุฌุฏูู `patients` ูู Supabase ูุง ูุญุชูู ุนูู ุนููุฏ `patient_id`ุ ุจู ูุณุชุฎุฏู ุนููุฏ `id` ููุนุฑูู ุฃุณุงุณู.
- **ุงูุชุฃุซูุฑ:** ูุดู ุฌููุน ุนูููุงุช ุชุณุฌูู ุงูุฏุฎูู ูุฅูุดุงุก ุญุณุงุจุงุช ุฌุฏูุฏุฉ ูููุฑุถูุ ููุง ูุคุฏู ุฅูู ุธููุฑ ุฎุทุฃ `Database error while checking patient`.

### ุงููุดููุฉ ุฑูู 2: ุฅุนุงุฏุฉ ุชูุฌูู ุฎุงุทุฆุฉ ูู Vercel

- **ุงููุตู:** ุนูุฏ ุทูุจ ููุทุฉ ููุงูุฉ ูุซู `/api/v1/health/status`ุ ูููู Vercel ุจุฅุฑุฌุงุน ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูููููุน (HTML) ุจุฏูุงู ูู ุงุณุชุฌุงุจุฉ ื-API (JSON).
- **ุงูุณุจุจ:** ููู `vercel.json` ูุญุชูู ุนูู ูุงุนุฏุฉ ุฅุนุงุฏุฉ ุชูุฌูู (`rewrites`) ูุฏ ุชููู ุบูุฑ ุฏูููุฉุ ููุง ูุฌุนู Vercel ูุนุงูุฌ ุฌููุน ุงูุทูุจุงุช ุบูุฑ ุงููุนุฑููุฉ ูุฌุฒุก ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Single Page Application).
- **ุงูุชุฃุซูุฑ:** ุฌููุน ููุงุท ุงูููุงูุฉ (API Endpoints) ุงูุชู ูุง ุชุชุตู ูุจุงุดุฑุฉ ุจู Supabase ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูุง ุชุนููุ ููุง ูุนุทู ูุธุงุฆู ูุซู ุงูุชุญูู ูู ุตุญุฉ ุงููุธุงู.

### ุงููุดููุฉ ุฑูู 3: ุฌุฏุงูู ุฃุณุงุณูุฉ ููููุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

- **ุงููุตู:** ูุงุนุฏุฉ ุจูุงูุงุช Supabase ุชูุชูุฑ ุฅูู ุฌุฏุงูู ุญูููุฉ ููุธุงุฆู ุงูุชุทุจูู ุงูุฃุณุงุณูุฉ.
- **ุงูุฌุฏุงูู ุงูููููุฏุฉ:**
  - `exam_types`: ุถุฑูุฑู ูุนูููุฉ ุงุฎุชูุงุฑ ููุน ุงููุญุต.
  - `exams`: ูู ุงููุญุชูู ุฃูู ุถุฑูุฑู ูุชุฎุฒูู ูุชุงุฆุฌ ุงููุญูุตุงุช.
- **ุงูุชุฃุซูุฑ:** ุชุนุทู ูุงูู ูููุฒุฉ ุงุฎุชูุงุฑ ููุน ุงููุญุต ูุงููุณุงุฑุงุช ุงูุทุจูุฉ ุงููุนุชูุฏุฉ ุนูููุง.

### ุงููุดููุฉ ุฑูู 4: ูุชุบูุฑุงุช ุจูุฆุฉ ุบูุฑ ูุงููุฉ ูู Vercel

- **ุงููุตู:** ุจุนุถ ูููุงุช API ูู ูุฌูุฏ `/api` ุชุนุชูุฏ ุนูู ูุชุบูุฑุงุช ุจูุฆุฉ (`process.env`) ุบูุฑ ูุนุฑููุฉ ูู ุฅุนุฏุงุฏุงุช Vercel.
- **ุงููุชุบูุฑุงุช ุงูููููุฏุฉ:**
  - `API_ORIGIN`
  - `UPSTREAM_API_BASE`
- **ุงูุชุฃุซูุฑ:** ูุดู ููุงุท ุงูููุงูุฉ ุงูุชู ุชุนูู ูู Proxy ูู ุงูุงุชุตุงู ุจุงูุฎุฏูุงุช ุงูุฎุงุฑุฌูุฉ (ุฅุฐุง ูุงูุช ููุฌูุฏุฉ).

---

## ๐๏ธ ุฎุทุฉ ุงูุฅุตูุงุญ ุงูููุชุฑุญุฉ (ุจุฏูู ุชุบููุฑ ูู ุงูููุทู)

ุณุฃููู ุจุชูููุฐ ุงูุฅุตูุงุญุงุช ุงูุชุงููุฉ ุจุงูุชุฑุชูุจ ูุถูุงู ุนูุฏุฉ ุงููุธุงู ููุนูู ุจุดูู ุตุญูุญ ูููุซูู.

### ุงูุฎุทูุฉ 1: ุฅุตูุงุญ ุนุฏู ุชุทุงุจู ุฃุณูุงุก ุงูุฃุนูุฏุฉ

- **ุงูุฅุฌุฑุงุก:** ุชุนุฏูู ููู `/api/v1/patients/login.ts`.
- **ุงูุชุบููุฑ:** ุงุณุชุจุฏุงู ุฌููุน ุงุณุชุฏุนุงุกุงุช `.eq('patient_id', ...)` ุจู `.eq('id', ...)`ุ ูุงุณุชุจุฏุงู `insert({ patient_id: ... })` ุจู `insert({ id: ... })`.
- **ุงููุฏู:** ููุงุกูุฉ ููุฏ ุงูู API ูุน ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุนููุฉ.

### ุงูุฎุทูุฉ 2: ุฅูุดุงุก ุงูุฌุฏุงูู ุงูููููุฏุฉ

- **ุงูุฅุฌุฑุงุก:** ุณุฃููู ุจุฅูุดุงุก ููู SQL ูุชุญุฏูุฏ ุจููุฉ ุงูุฌุฏุงูู ุงูููููุฏุฉ ูุชุทุจููู ุนูู ูุงุนุฏุฉ ุจูุงูุงุช Supabase.
- **ุงูุฌุฏูู ุงูุฃูู (`exam_types`):**
  ```sql
  CREATE TABLE public.exam_types (
    id TEXT PRIMARY KEY,
    name_ar TEXT NOT NULL,
    name_en TEXT NOT NULL,
    description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    display_order INT
  );
  ```
- **ุงููุฏู:** ุชูุนูู ููุฒุฉ ุงุฎุชูุงุฑ ููุน ุงููุญุต.

### ุงูุฎุทูุฉ 3: ุฅุตูุงุญ ุฅุนุงุฏุฉ ุงูุชูุฌูู ูู Vercel

- **ุงูุฅุฌุฑุงุก:** ุชุนุฏูู ููู `vercel.json`.
- **ุงูุชุบููุฑ:** ุณุฃููู ุจูุฑุงุฌุนุฉ ูุชุตุญูุญ ููุงุนุฏ `rewrites` ูุถูุงู ุฃู ุงูุทูุจุงุช ุงูุชู ุชุจุฏุฃ ุจู `/api/` ูุชู ุชูุฌูููุง ุจุดูู ุตุญูุญ ุฅูู Vercel Serverless Functions ุจุฏูุงู ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ.
- **ุงููุฏู:** ุชูุนูู ุฌููุน ููุงุท ุงูููุงูุฉ (API Endpoints) ูุฌุนููุง ูุงุจูุฉ ูููุตูู.

### ุงูุฎุทูุฉ 4: ุฅุถุงูุฉ ุจูุงูุงุช ุงุฎุชุจุงุฑูุฉ ููุฌุฏุงูู

- **ุงูุฅุฌุฑุงุก:** ุจุนุฏ ุฅูุดุงุก ุงูุฌุฏุงููุ ุณุฃููู ุจุฅุถุงูุฉ ุจุนุถ ุงูุจูุงูุงุช ุงูุงุฎุชุจุงุฑูุฉ (ูุซู ุฃููุงุน ุงููุญูุตุงุช) ูุชูููู ุงูุงุฎุชุจุงุฑ ุงููุงูู ูููุธุงุฆู.
- **ุงููุฏู:** ุงูุชุฃูุฏ ูู ุฃู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูููููุง ุณุญุจ ุงูุจูุงูุงุช ูุนุฑุถูุง ุจุดูู ุตุญูุญ.

### ุงูุฎุทูุฉ 5: ุงูุชุญูู ุงูููุงุฆู ูุงูุงุฎุชุจุงุฑ ุงูุดุงูู

- **ุงูุฅุฌุฑุงุก:** ุจุนุฏ ุชุทุจูู ุฌููุน ุงูุฅุตูุงุญุงุชุ ุณุฃููู ุจุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุดุงูู ุฌุฏูุฏ:
  1. ุงุฎุชุจุงุฑ ุชุณุฌูู ุฏุฎูู ูุฑูุถ ุฌุฏูุฏ ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ.
  2. ุงุฎุชุจุงุฑ ุงุฎุชูุงุฑ ููุน ุงููุญุต.
  3. ุงุฎุชุจุงุฑ ุงูุฏุฎูู ูู ุทุงุจูุฑ.
  4. ุงูุชุญูู ูู ุฌููุน ููุงุท ุงูููุงูุฉ (API Endpoints) ูุฑุฉ ุฃุฎุฑู.
- **ุงููุฏู:** ุงูุชุฃูุฏ ูู ุฃู ุฌููุน ุงููุณุงุฑุงุช ุชุนูู ุจุดูู ูุชูุงูู ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุฅูู ุงูุฎูููุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช.

---

## โณ ุงูุญุงูุฉ ุงูุญุงููุฉ

ุฃูุง ุงูุขู ูู ูุฑุญูุฉ **ุชูุซูู ุงููุดุงูู ูุฅุนุฏุงุฏ ุฎุทุฉ ุงูุฅุตูุงุญ**. ุณุฃูุชูู ุฅูู ูุฑุญูุฉ **ุชูููุฐ ุงูุฅุตูุงุญุงุช** ุจุนุฏ ูุฐู ุงูุฑุณุงูุฉ ูุจุงุดุฑุฉ.

**ูู ุชูุงูู ุนูู ูุฐู ุงูุฎุทุฉุ** ุณุฃุจุฏุฃ ุงูุขู ุจุชูููุฐ ุงูุฅุตูุงุญุงุช ููุง ูู ููุถุญ ูู ุงูุฎุทุฉ. ุณุฃุจููู ุนูู ุงุทูุงุน ุฏุงุฆู ุจุงูุชูุฏู ุงููุญุฑุฒ ูู ูู ุฎุทูุฉ.ุทุฉุ**
